<div>
  <label for="title">Название главы</label>
  <input
    id="title"
    type="text"
    [(ngModel)]="title"
    (ngModelChange)="titleChange.emit($event)"
    name="title"
    class="form-input"
    required
  />
</div>

<div>
  <label for="content">Содержание главы</label>
  <textarea
    id="content"
    [(ngModel)]="content"
    (ngModelChange)="contentChange.emit($event)"
    name="content"
    rows="16"
    class="form-input w-full max-w-5xl"
    placeholder="Введите содержание главы..."
  ></textarea>
</div>

<hr class="my-4" />

<div *ngFor="let image of images; let i = index" class="mb-4">
  <div class="flex justify-between items-center mb-1">
    <a
      type="button"
      (click)="toggleEditing(i)"
      class="text-sm text-gray-400 hover:text-gray-600 transition cursor-pointer"
    >
      Редактировать <span class="text-black">Изображение {{ image.order }}</span>
    </a>
    <div>
      <button
        type="button"
        (click)="onDeleteImage(i)"
        class="text-sm text-red-500 hover:text-red-700 ml-4"
      >
        Удалить изображение
      </button>
    </div>
  </div>

  <div *ngIf="editingFlags[i]" class="mt-2">
    <input
      type="file"
      accept="image/*"
      (change)="onImageChange($event, i)"
      class="form-input"
    />
  </div>

  <label>Подпись</label>
  <input
    type="text"
    [(ngModel)]="image.caption"
    (ngModelChange)="imagesChange.emit(images)"
    name="caption{{ i }}"
    class="form-input"
  />
</div>

<button type="button" (click)="addImageInput()" class="form-button mt-2">
  + Добавить изображение
</button>

<button type="button" (click)="submitForm.emit()" class="form-button mt-4">
  Сохранить главу
</button>
